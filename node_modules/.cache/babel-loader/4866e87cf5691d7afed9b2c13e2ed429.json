{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { WebPlugin, registerWebPlugin } from '@capacitor/core';\nexport var HttpPluginWeb = /*#__PURE__*/function (_WebPlugin) {\n  _inherits(HttpPluginWeb, _WebPlugin);\n\n  var _super = _createSuper(HttpPluginWeb);\n\n  function HttpPluginWeb() {\n    _classCallCheck(this, HttpPluginWeb);\n\n    return _super.call(this, {\n      name: 'Http',\n      platforms: ['web', 'electron']\n    });\n  }\n\n  _createClass(HttpPluginWeb, [{\n    key: \"getRequestHeader\",\n    value: function getRequestHeader(headers, key) {\n      var originalKeys = Object.keys(headers);\n      var keys = Object.keys(headers).map(function (k) {\n        return k.toLocaleLowerCase();\n      });\n      var lowered = keys.reduce(function (newHeaders, key, index) {\n        newHeaders[key] = headers[originalKeys[index]];\n        return newHeaders;\n      }, {});\n      return lowered[key.toLocaleLowerCase()];\n    }\n  }, {\n    key: \"nativeHeadersToObject\",\n    value: function nativeHeadersToObject(headers) {\n      var h = {};\n      headers.forEach(function (value, key) {\n        h[key] = value;\n      });\n      return h;\n    }\n  }, {\n    key: \"makeFetchOptions\",\n    value: function makeFetchOptions(options, fetchExtra) {\n      var req = Object.assign({\n        method: options.method || 'GET',\n        headers: options.headers\n      }, fetchExtra || {});\n      var contentType = this.getRequestHeader(options.headers || {}, 'content-type') || '';\n\n      if (contentType.indexOf('application/json') === 0) {\n        req['body'] = JSON.stringify(options.data);\n      } else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n        var urlSearchParams = new URLSearchParams();\n\n        for (var _i = 0, _Object$keys = Object.keys(options.data); _i < _Object$keys.length; _i++) {\n          var key = _Object$keys[_i];\n          urlSearchParams.set(key, options.data[key]);\n        }\n\n        req['body'] = urlSearchParams.toString();\n      } else if (contentType.indexOf('multipart/form-data') === 0 || typeof options.data === 'object') {\n        var formData = new FormData();\n\n        for (var _i2 = 0, _Object$keys2 = Object.keys(options.data); _i2 < _Object$keys2.length; _i2++) {\n          var _key = _Object$keys2[_i2];\n          formData.append(_key, options.data[_key]);\n        }\n\n        req['body'] = formData;\n      }\n\n      return req;\n    }\n  }, {\n    key: \"makeFetchParams\",\n    value: function makeFetchParams(params) {\n      if (!params) return null;\n      return Object.entries(params).reduce(function (prev, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        var encodedValue = encodeURIComponent(value);\n        var keyValue = \"\".concat(key, \"=\").concat(encodedValue);\n        return prev ? \"\".concat(prev, \"&\").concat(keyValue) : keyValue;\n      }, '');\n    }\n  }, {\n    key: \"request\",\n    value: function request(options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var fetchOptions, fetchParams, fetchUrl, ret, contentType, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n                fetchParams = this.makeFetchParams(options.params);\n                fetchUrl = fetchParams ? \"\".concat(options.url, \"?\").concat(fetchParams) : options.url;\n                _context.next = 5;\n                return fetch(fetchUrl, fetchOptions);\n\n              case 5:\n                ret = _context.sent;\n                contentType = ret.headers.get('content-type');\n\n                if (!(contentType && contentType.indexOf('application/json') === 0)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.next = 10;\n                return ret.json();\n\n              case 10:\n                data = _context.sent;\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.next = 15;\n                return ret.text();\n\n              case 15:\n                data = _context.sent;\n\n              case 16:\n                return _context.abrupt(\"return\", {\n                  status: ret.status,\n                  data: data,\n                  headers: this.nativeHeadersToObject(ret.headers),\n                  url: ret.url\n                });\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"setCookie\",\n    value: function setCookie(options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var expires, date;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                expires = '';\n\n                if (options.expires) {\n                  // remove \"expires=\" so you can pass with or without the prefix\n                  expires = \"; expires=\".concat(options.expires.replace(/expires=/gi, ''));\n                } else if (options.ageDays) {\n                  date = new Date();\n                  date.setTime(date.getTime() + options.ageDays * 24 * 60 * 60 * 1000);\n                  expires = '; expires=' + date.toUTCString();\n                }\n\n                document.cookie = options.key + '=' + (options.value || '') + expires + '; path=/';\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    }\n  }, {\n    key: \"getCookies\",\n    value: function getCookies(_options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var cookies;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (document.cookie) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  value: []\n                });\n\n              case 2:\n                cookies = document.cookie.split(';');\n                return _context3.abrupt(\"return\", {\n                  value: cookies.map(function (c) {\n                    var cParts = c.split(';').map(function (cv) {\n                      return cv.trim();\n                    });\n                    var cNameValue = cParts[0];\n                    var cValueParts = cNameValue.split('=');\n                    var key = cValueParts[0];\n                    var value = cValueParts[1];\n                    return {\n                      key: key,\n                      value: value\n                    };\n                  })\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n  }, {\n    key: \"deleteCookie\",\n    value: function deleteCookie(options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                document.cookie = options.key + \"=; expires=\".concat(new Date().toUTCString());\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    }\n  }, {\n    key: \"clearCookies\",\n    value: function clearCookies(_options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                document.cookie.split(';').forEach(function (c) {\n                  return document.cookie = c.replace(/^ +/, '').replace(/=.*/, \"=;expires=\".concat(new Date().toUTCString(), \";path=/\"));\n                });\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function uploadFile(options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var fetchOptions, formData;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n                formData = new FormData();\n                formData.append(options.name, options.blob);\n                _context6.next = 5;\n                return fetch(options.url, Object.assign(Object.assign({}, fetchOptions), {\n                  body: formData,\n                  method: 'POST'\n                }));\n\n              case 5:\n                return _context6.abrupt(\"return\", {});\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }, {\n    key: \"downloadFile\",\n    value: function downloadFile(options) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var fetchOptions, ret, blob;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n                _context7.next = 3;\n                return fetch(options.url, fetchOptions);\n\n              case 3:\n                ret = _context7.sent;\n\n                if (ret.ok) {\n                  _context7.next = 6;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", Promise.reject('Download file error: response not ok'));\n\n              case 6:\n                _context7.next = 8;\n                return ret.blob();\n\n              case 8:\n                blob = _context7.sent;\n                return _context7.abrupt(\"return\", {\n                  blob: blob\n                });\n\n              case 10:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    }\n  }]);\n\n  return HttpPluginWeb;\n}(WebPlugin);\nvar Http = new HttpPluginWeb();\nexport { Http };\nregisterWebPlugin(Http);","map":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { WebPlugin, registerWebPlugin } from '@capacitor/core';\nexport class HttpPluginWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Http',\n            platforms: ['web', 'electron'],\n        });\n    }\n    getRequestHeader(headers, key) {\n        const originalKeys = Object.keys(headers);\n        const keys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n        const lowered = keys.reduce((newHeaders, key, index) => {\n            newHeaders[key] = headers[originalKeys[index]];\n            return newHeaders;\n        }, {});\n        return lowered[key.toLocaleLowerCase()];\n    }\n    nativeHeadersToObject(headers) {\n        const h = {};\n        headers.forEach((value, key) => {\n            h[key] = value;\n        });\n        return h;\n    }\n    makeFetchOptions(options, fetchExtra) {\n        const req = Object.assign({ method: options.method || 'GET', headers: options.headers }, (fetchExtra || {}));\n        const contentType = this.getRequestHeader(options.headers || {}, 'content-type') || '';\n        if (contentType.indexOf('application/json') === 0) {\n            req['body'] = JSON.stringify(options.data);\n        }\n        else if (contentType.indexOf('application/x-www-form-urlencoded') === 0) {\n            const urlSearchParams = new URLSearchParams();\n            for (let key of Object.keys(options.data)) {\n                urlSearchParams.set(key, options.data[key]);\n            }\n            req['body'] = urlSearchParams.toString();\n        }\n        else if (contentType.indexOf('multipart/form-data') === 0 ||\n            typeof options.data === 'object') {\n            let formData = new FormData();\n            for (let key of Object.keys(options.data)) {\n                formData.append(key, options.data[key]);\n            }\n            req['body'] = formData;\n        }\n        return req;\n    }\n    makeFetchParams(params) {\n        if (!params)\n            return null;\n        return Object.entries(params).reduce((prev, [key, value]) => {\n            const encodedValue = encodeURIComponent(value);\n            const keyValue = `${key}=${encodedValue}`;\n            return prev ? `${prev}&${keyValue}` : keyValue;\n        }, '');\n    }\n    request(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n            const fetchParams = this.makeFetchParams(options.params);\n            const fetchUrl = fetchParams\n                ? `${options.url}?${fetchParams}`\n                : options.url;\n            const ret = yield fetch(fetchUrl, fetchOptions);\n            const contentType = ret.headers.get('content-type');\n            let data;\n            if (contentType && contentType.indexOf('application/json') === 0) {\n                data = yield ret.json();\n            }\n            else {\n                data = yield ret.text();\n            }\n            return {\n                status: ret.status,\n                data,\n                headers: this.nativeHeadersToObject(ret.headers),\n                url: ret.url,\n            };\n        });\n    }\n    setCookie(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var expires = '';\n            if (options.expires) {\n                // remove \"expires=\" so you can pass with or without the prefix\n                expires = `; expires=${options.expires.replace(/expires=/gi, '')}`;\n            }\n            else if (options.ageDays) {\n                const date = new Date();\n                date.setTime(date.getTime() + options.ageDays * 24 * 60 * 60 * 1000);\n                expires = '; expires=' + date.toUTCString();\n            }\n            document.cookie =\n                options.key + '=' + (options.value || '') + expires + '; path=/';\n        });\n    }\n    getCookies(_options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!document.cookie) {\n                return { value: [] };\n            }\n            var cookies = document.cookie.split(';');\n            return {\n                value: cookies.map(c => {\n                    const cParts = c.split(';').map(cv => cv.trim());\n                    const cNameValue = cParts[0];\n                    const cValueParts = cNameValue.split('=');\n                    const key = cValueParts[0];\n                    const value = cValueParts[1];\n                    return {\n                        key,\n                        value,\n                    };\n                }),\n            };\n        });\n    }\n    deleteCookie(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            document.cookie = options.key + `=; expires=${new Date().toUTCString()}`;\n        });\n    }\n    clearCookies(_options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            document.cookie\n                .split(';')\n                .forEach(c => (document.cookie = c\n                .replace(/^ +/, '')\n                .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`)));\n        });\n    }\n    uploadFile(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n            const formData = new FormData();\n            formData.append(options.name, options.blob);\n            yield fetch(options.url, Object.assign(Object.assign({}, fetchOptions), { body: formData, method: 'POST' }));\n            return {};\n        });\n    }\n    downloadFile(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const fetchOptions = this.makeFetchOptions(options, options.webFetchExtra);\n            const ret = yield fetch(options.url, fetchOptions);\n            if (!ret.ok) {\n                return Promise.reject('Download file error: response not ok');\n            }\n            const blob = yield ret.blob();\n            return {\n                blob,\n            };\n        });\n    }\n}\nconst Http = new HttpPluginWeb();\nexport { Http };\nregisterWebPlugin(Http);\n//# sourceMappingURL=web.js.map"]},"metadata":{},"sourceType":"module"}