{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _toConsumableArray from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\src\\\\pages\\\\myBooking\\\\bookingDetails\\\\BookingDetails.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { IonContent, IonPage, IonInfiniteScroll, IonInfiniteScrollContent, IonRow, IonGrid, IonToolbar, IonInput, IonButtons, IonIcon, IonLabel } from \"@ionic/react\";\nimport BookingCard from \"./bookingCard/BookingCard\";\nimport * as EndPointURL from \"../../../util/EndPointURL\";\nimport { httpGetCallWithoutHeader } from \"../../../services/EndPointApi\";\nimport Header from \"../../../components/Header\";\nimport Store from \"../../../redux/Store\";\nimport { chevronDownOutline, search } from \"ionicons/icons\";\nimport TopMenu from \"../../../components/topMenu/TopMenu\"; // import PaymentSuccess from \"./PaymentSuccess\";\n// import PaymentFailed from \"./PaymentFailed\";\n// import PaymentPending from \"./PaymentPending\";\n// import Footer from \"./Footer\";\n\nimport \"./BookingDetails.scss\";\nimport MainTabs from \"../../MainTabs\";\nimport SlideUpModal from \"../../../components/PopUp/SlideUpModal\";\nimport SearchBoeByDate from \"../../../components/PopUp/SearchBoeByDate\";\nvar pageNumber = 0;\nexport default function MyBookingDetails(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      result = _useState2[0],\n      setResult = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      disableInfiniteScroll = _useState4[0],\n      setDisableInfiniteScroll = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      requestStatus = _useState8[0],\n      setRequestStatus = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      paymentPage = _useState10[0],\n      setPaymentPage = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      referenceNumber = _useState12[0],\n      setReferenceNumber = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      agent = _useState14[0],\n      setAgent = _useState14[1];\n\n  var _useState15 = useState(\"DESC\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      sortOrderDate = _useState16[0],\n      setSortOrderDate = _useState16[1];\n\n  var _useState17 = useState(\"ASC\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      sortOrderAmount = _useState18[0],\n      setSortOrderAmount = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      showModal = _useState20[0],\n      setShowModal = _useState20[1];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      _searchClick = _useState22[0],\n      isSearchClick = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      seachValue = _useState24[0],\n      setSearchValue = _useState24[1];\n\n  var getTitle = function getTitle(status) {\n    switch (status) {\n      case \"ALL\":\n        setTitle(\"ALL BOOKINGS\");\n        break;\n\n      case \"PODUPL\":\n        setTitle(\"VERIFY POD'S\");\n        break;\n\n      case \"INVSUBMT\":\n        setTitle(\"VERIFY INVOICES\");\n        break;\n\n      default:\n        setTitle(\"\");\n    }\n  };\n\n  var onCardClick = function onCardClick(item) {\n    var userType = Store.getState().CheckUserStatus.user.userType;\n    var bookingDetails = {\n      bookingNumber: item === null || item === void 0 ? void 0 : item.bookingNumber,\n      requesterName: item === null || item === void 0 ? void 0 : item.requesterName,\n      requesterContact: item === null || item === void 0 ? void 0 : item.requesterContact,\n      importerComments: item === null || item === void 0 ? void 0 : item.importerComments,\n      totalAmount: item === null || item === void 0 ? void 0 : item.amountPaid,\n      truckCount: item === null || item === void 0 ? void 0 : item.noOfTrucks,\n      containerCount: item === null || item === void 0 ? void 0 : item.noOfContainers,\n      userType: userType,\n      cardStatus: props.match.params.status,\n      bookingStatus: item === null || item === void 0 ? void 0 : item.statusCode\n    };\n    props.history.push(\"/containerDetails\", bookingDetails);\n  };\n\n  useEffect(function () {\n    Store.subscribe(function () {\n      setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\n    });\n    console.log(\"Store\", Store.getState().CheckUserStatus.user.selectedAgent);\n    var parameter = \"\";\n    pageNumber = 0;\n    fetchData(parameter);\n  }, [agent]);\n  var footerProps = {\n    locationProps: props.history\n  };\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(param) {\n      var key,\n          appUrl,\n          response,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(_args.length <= 1 ? undefined : _args[1]);\n              key = props.match.params.status;\n              setRequestStatus(key);\n              getTitle(key);\n\n              if (!param) {\n                param = key == \"ALL\" ? \"sortOrder=\".concat(sortOrderDate, \"&sortCol=1&pgSize=10&pgNo=0&locale=en\") : \"statusCode=\".concat(key, \"&sortOrder=\").concat(sortOrderDate, \"&sortCol=1&pgSize=10&pgNo=0&locale=en\");\n              }\n\n              appUrl = \"\".concat(EndPointURL.bookingDetails, \"&\").concat(param);\n              _context.next = 8;\n              return httpGetCallWithoutHeader(appUrl);\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return response.success;\n\n            case 11:\n              if (!_context.sent) {\n                _context.next = 15;\n                break;\n              }\n\n              (_args.length <= 1 ? undefined : _args[1]) ? setResult(_toConsumableArray(response.data.elements)) : setResult([].concat(_toConsumableArray(result), _toConsumableArray(response.data.elements)));\n              console.log(response.data.elements);\n              setDisableInfiniteScroll(response.data.elements.length < 10);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchData(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  function searchNext(_x2) {\n    return _searchNext.apply(this, arguments);\n  }\n\n  function _searchNext() {\n    _searchNext = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6($event) {\n      var key, param;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              pageNumber = pageNumber + 1;\n              key = props.match.params.status;\n              param = \"sortOrder=\".concat(sortOrderDate, \"&sortCol=1&pgSize=10&pgNo=\").concat(pageNumber, \"&locale=en\");\n              _context6.next = 5;\n              return fetchData(param);\n\n            case 5:\n              $event.target.complete();\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _searchNext.apply(this, arguments);\n  }\n\n  var goBack = function goBack() {\n    props.history.push(\"/tabs/status\");\n  };\n\n  var onStatusChange = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(status) {\n      var param;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              param = \"status=\".concat(status, \"&pgSize=10&pgNo=0&locale=en\");\n              _context2.next = 3;\n              return fetchData(param, true);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onStatusChange(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onSearchBooking = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(bookingNumber) {\n      var param;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(seachValue !== \"\")) {\n                _context3.next = 4;\n                break;\n              }\n\n              param = \"bookingNumber=\".concat(bookingNumber, \"&pgSize=10&pgNo=0&locale=en\");\n              _context3.next = 4;\n              return fetchData(param, true);\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onSearchBooking(_x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onSort = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(column) {\n      var sortOrder, param;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (column == 1) {\n                sortOrder = sortOrderDate == \"ASC\" ? \"DESC\" : \"ASC\";\n                setSortOrderDate(sortOrder);\n              } else {\n                sortOrder = sortOrderAmount == \"ASC\" ? \"DESC\" : \"ASC\";\n                setSortOrderAmount(sortOrder);\n              }\n\n              param = \"sortOrder=\".concat(sortOrder, \"&sortCol=\").concat(column, \"&pgSize=10&pgNo=0&locale=en\");\n              _context4.next = 4;\n              return fetchData(param, true);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function onSort(_x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onDateSearch = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(fromDate, toDate) {\n      var param;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (!(fromDate && toDate)) {\n                _context5.next = 4;\n                break;\n              }\n\n              param = \"fromDate=\".concat(fromDate, \"&toDate=\").concat(toDate, \"&pgSize=10&pgNo=0&locale=en\");\n              _context5.next = 4;\n              return fetchData(param, true);\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function onDateSearch(_x6, _x7) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var topMenuItems = [{\n    name: \"\",\n    src: \"filter\",\n    slot: \"\",\n    type: \"button\",\n    clickedOnTopMenu: function clickedOnTopMenu() {\n      setShowModal(true);\n    }\n  }, {\n    name: \"Booked Status\",\n    icon: chevronDownOutline,\n    slot: \"end\",\n    type: \"dropDown\",\n    list: [{\n      label: \"Pending Payment\",\n      value: \"PPAY\"\n    }, {\n      label: \"Failed Payment\",\n      value: \"FPAY\"\n    }, {\n      label: \"Transporter Pending\",\n      value: \"SUCC\"\n    }, {\n      label: \"Transporter Confirmed\",\n      value: \"TRANSCONF\"\n    }, {\n      label: \"MT IN Delivered\",\n      value: \"FPAY\"\n    }],\n    clickedOnTopMenu: function clickedOnTopMenu(e) {\n      console.log(\"clicked2\", e);\n      onStatusChange(e.value);\n    }\n  }, {\n    name: \"Booked on\",\n    slot: \"start\",\n    src: \"filter-down-arrow\",\n    rotate: sortOrderDate == \"ASC\" ? \"rotate(180deg)\" : \"\",\n    size: \"0.7rem\",\n    type: \"button\",\n    clickedOnTopMenu: function clickedOnTopMenu() {\n      return onSort(1);\n    }\n  }, {\n    name: \"Amount\",\n    slot: \"start\",\n    src: \"filter-down-arrow\",\n    rotate: sortOrderAmount == \"ASC\" ? \"rotate(180deg)\" : \"\",\n    size: \"0.7rem\",\n    type: \"button\",\n    clickedOnTopMenu: function clickedOnTopMenu() {\n      return onSort(5);\n    }\n  }];\n\n  function SearchBooking() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IonToolbar, {\n      className: \"border-bottom-booking\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IonInput, {\n      placeholder: \"Search with Booking Number\",\n      type: \"search\",\n      value: seachValue,\n      className: \"input-box\",\n      onIonBlur: function onIonBlur() {\n        return onSearchBooking(seachValue);\n      },\n      onIonChange: function onIonChange(e) {\n        return setSearchValue(e.detail.value);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }\n    }), seachValue == \"\" ? /*#__PURE__*/React.createElement(IonButtons, {\n      slot: \"end\",\n      className: \"search-icon \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      slot: \"icon-only\",\n      icon: search,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    })) : /*#__PURE__*/React.createElement(IonButtons, {\n      slot: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonLabel, {\n      className: \"search-clear\",\n      onClick: function onClick() {\n        setSearchValue(\"\");\n        fetchData(\"\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, \"Clear\"))));\n  }\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    id: \"booking-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    label: title,\n    action: \"search\",\n    customBack: true,\n    backClick: goBack,\n    showAgent: true,\n    agentHeader: true,\n    searchClick: function searchClick() {\n      isSearchClick(!_searchClick);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    \"padding-top\": true,\n    scrollEvents: true,\n    hidden: paymentPage !== \"\",\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SlideUpModal, {\n    showModal: showModal,\n    openOrCloseModal: function openOrCloseModal(status) {\n      return setShowModal(status);\n    },\n    content: /*#__PURE__*/React.createElement(SearchBoeByDate, {\n      openOrCloseModal: function openOrCloseModal(modalStatus, fromDate, toDate) {\n        setShowModal(modalStatus);\n        onDateSearch(fromDate, toDate);\n      },\n      headerName: \"Booked On Date Filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 20\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(IonRow, {\n    className: \"horizontal-scroll\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  }, _searchClick ? /*#__PURE__*/React.createElement(SearchBooking, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(TopMenu, {\n    topMenuProps: topMenuItems,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decl-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, \" \", \"Displaying \", result.length, \" bookings\"), /*#__PURE__*/React.createElement(IonGrid, {\n    \"margin-top\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  }, result.map(function (item, id) {\n    var _item$amountPaid;\n\n    return /*#__PURE__*/React.createElement(BookingCard, {\n      status: requestStatus,\n      key: id,\n      town: item === null || item === void 0 ? void 0 : item.containersToTown,\n      yard: item === null || item === void 0 ? void 0 : item.containersInYard,\n      delivered: item === null || item === void 0 ? void 0 : item.containersDelivered,\n      completed: item === null || item === void 0 ? void 0 : item.containersCompleted,\n      bookingNumber: item === null || item === void 0 ? void 0 : item.bookingNumber,\n      amount: (_item$amountPaid = item === null || item === void 0 ? void 0 : item.amountPaid) !== null && _item$amountPaid !== void 0 ? _item$amountPaid : \"0 AED\",\n      bookedOn: item === null || item === void 0 ? void 0 : item.bookedOn,\n      noOfContainers: item === null || item === void 0 ? void 0 : item.noOfContainers // countTitle={title}\n      ,\n      paymentStatus: item === null || item === void 0 ? void 0 : item.statusCode,\n      noOfTrucks: item.noOfTrucks,\n      clickCard: function clickCard() {\n        return onCardClick(item);\n      },\n      paymentClick: function paymentClick(e) {\n        setPaymentPage(e);\n        setReferenceNumber(item === null || item === void 0 ? void 0 : item.bookingNumber);\n        console.log('paymentPage', e);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 13\n      }\n    });\n  })), /*#__PURE__*/React.createElement(IonInfiniteScroll, {\n    threshold: \"100px\",\n    disabled: disableInfiniteScroll,\n    onIonInfinite: function onIonInfinite(e) {\n      return searchNext(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonInfiniteScrollContent, {\n    loadingText: \"Loading more...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(IonContent, {\n    style: {\n      maxHeight: \"86px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MainTabs, {\n    tab: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["D:/SVN-folder/New-BRANCH-PUSH/New folder/src/pages/myBooking/bookingDetails/BookingDetails.tsx"],"names":["React","useEffect","useState","IonContent","IonPage","IonInfiniteScroll","IonInfiniteScrollContent","IonRow","IonGrid","IonToolbar","IonInput","IonButtons","IonIcon","IonLabel","BookingCard","EndPointURL","httpGetCallWithoutHeader","Header","Store","chevronDownOutline","search","TopMenu","MainTabs","SlideUpModal","SearchBoeByDate","pageNumber","MyBookingDetails","props","result","setResult","disableInfiniteScroll","setDisableInfiniteScroll","title","setTitle","requestStatus","setRequestStatus","paymentPage","setPaymentPage","referenceNumber","setReferenceNumber","agent","setAgent","sortOrderDate","setSortOrderDate","sortOrderAmount","setSortOrderAmount","showModal","setShowModal","searchClick","isSearchClick","seachValue","setSearchValue","getTitle","status","onCardClick","item","userType","getState","CheckUserStatus","user","bookingDetails","bookingNumber","requesterName","requesterContact","importerComments","totalAmount","amountPaid","truckCount","noOfTrucks","containerCount","noOfContainers","cardStatus","match","params","bookingStatus","statusCode","history","push","subscribe","selectedAgent","console","log","parameter","fetchData","footerProps","locationProps","param","key","appUrl","response","success","data","elements","length","searchNext","$event","target","complete","goBack","onStatusChange","onSearchBooking","onSort","column","sortOrder","onDateSearch","fromDate","toDate","topMenuItems","name","src","slot","type","clickedOnTopMenu","icon","list","label","value","e","rotate","size","SearchBooking","detail","modalStatus","map","id","containersToTown","containersInYard","containersDelivered","containersCompleted","bookedOn","maxHeight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonContent,\r\n  IonPage,\r\n  IonInfiniteScroll,\r\n  IonInfiniteScrollContent,\r\n  IonRow,\r\n  IonGrid,\r\n  IonToolbar,\r\n  IonInput,\r\n  IonButtons,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonCol\r\n} from \"@ionic/react\";\r\nimport BookingCard from \"./bookingCard/BookingCard\";\r\nimport * as EndPointURL from \"../../../util/EndPointURL\";\r\nimport { httpGetCallWithoutHeader } from \"../../../services/EndPointApi\";\r\nimport Header from \"../../../components/Header\";\r\nimport Store from \"../../../redux/Store\";\r\nimport { chevronDownOutline, search } from \"ionicons/icons\";\r\nimport TopMenu from \"../../../components/topMenu/TopMenu\";\r\n// import PaymentSuccess from \"./PaymentSuccess\";\r\n// import PaymentFailed from \"./PaymentFailed\";\r\n// import PaymentPending from \"./PaymentPending\";\r\n// import Footer from \"./Footer\";\r\nimport \"./BookingDetails.scss\"\r\nimport MainTabs from \"../../MainTabs\";\r\nimport SlideUpModal from \"../../../components/PopUp/SlideUpModal\";\r\nimport SearchBoeByDate from \"../../../components/PopUp/SearchBoeByDate\";\r\n\r\nvar pageNumber = 0;\r\nexport default function MyBookingDetails(props) {\r\n\r\n  const [result, setResult] = useState([]);\r\n  const [disableInfiniteScroll, setDisableInfiniteScroll] = useState<boolean>(\r\n    false\r\n  );\r\n  const [title, setTitle] = useState(\"\");\r\n  const [requestStatus, setRequestStatus] = useState(\"\");\r\n  const [paymentPage, setPaymentPage] = useState(\"\");\r\n  const [referenceNumber, setReferenceNumber] = useState();\r\n  const [agent, setAgent] = useState();\r\n  const [sortOrderDate, setSortOrderDate] = useState<string>(\"DESC\");\r\n  const [sortOrderAmount, setSortOrderAmount] = useState<string>(\"ASC\");\r\n  const [showModal, setShowModal] = useState<boolean>(false);\r\n  const [searchClick, isSearchClick] = useState<boolean>(false);\r\n  const [seachValue, setSearchValue] = useState<string>(\"\");\r\n\r\n  const getTitle = (status) => {\r\n    switch (status) {\r\n      case \"ALL\":\r\n        setTitle(\"ALL BOOKINGS\");\r\n        break;\r\n      case \"PODUPL\":\r\n        setTitle(\"VERIFY POD'S\");\r\n        break;\r\n      case \"INVSUBMT\":\r\n        setTitle(\"VERIFY INVOICES\");\r\n        break;\r\n      default:\r\n        setTitle(\"\");\r\n    }\r\n  };\r\n\r\n  const onCardClick = (item) => {\r\n    var userType = Store.getState().CheckUserStatus.user.userType;\r\n    let bookingDetails = {\r\n      bookingNumber: item?.bookingNumber,\r\n      requesterName: item?.requesterName,\r\n      requesterContact: item?.requesterContact,\r\n      importerComments: item?.importerComments,\r\n      totalAmount: item?.amountPaid,\r\n      truckCount: item?.noOfTrucks,\r\n      containerCount: item?.noOfContainers,\r\n      userType: userType,\r\n      cardStatus: props.match.params.status,\r\n      bookingStatus: item?.statusCode\r\n    };\r\n    props.history.push(\"/containerDetails\", bookingDetails);\r\n  };\r\n\r\n  useEffect(() => {\r\n    Store.subscribe(() => {\r\n      setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\r\n    });\r\n    console.log(\"Store\", Store.getState().CheckUserStatus.user.selectedAgent)\r\n    var parameter = \"\";\r\n    pageNumber = 0;\r\n    fetchData(parameter);\r\n  }, [agent]);\r\n\r\n  const footerProps = {\r\n    locationProps: props.history,\r\n  };\r\n\r\n  const fetchData = async (param, ...isFilter) => {\r\n    console.log(isFilter[0])\r\n    const key = props.match.params.status;\r\n    setRequestStatus(key);\r\n    getTitle(key);\r\n    if (!param) {\r\n      param = key == \"ALL\" ?\r\n        `sortOrder=${sortOrderDate}&sortCol=1&pgSize=10&pgNo=0&locale=en` :\r\n        `statusCode=${key}&sortOrder=${sortOrderDate}&sortCol=1&pgSize=10&pgNo=0&locale=en`;\r\n    }\r\n\r\n    let appUrl = `${EndPointURL.bookingDetails}&${param}`;\r\n\r\n    var response = await httpGetCallWithoutHeader(appUrl);\r\n    if (await response.success) {\r\n      isFilter[0] ? setResult([...response.data.elements]) : setResult([...result, ...response.data.elements]);\r\n      console.log(response.data.elements);\r\n      setDisableInfiniteScroll(response.data.elements.length < 10);\r\n    }\r\n  }\r\n\r\n  async function searchNext($event: CustomEvent<void>) {\r\n    pageNumber = pageNumber + 1;\r\n    const key = props.match.params.status;\r\n    var param = `sortOrder=${sortOrderDate}&sortCol=1&pgSize=10&pgNo=${pageNumber}&locale=en`;\r\n    await fetchData(param);\r\n    ($event.target as HTMLIonInfiniteScrollElement).complete();\r\n  }\r\n\r\n  const goBack = () => {\r\n    props.history.push(\"/tabs/status\");\r\n  }\r\n\r\n  const onStatusChange = async (status) => {\r\n    let param = `status=${status}&pgSize=10&pgNo=0&locale=en`;\r\n    await fetchData(param, true);\r\n  }\r\n\r\n  const onSearchBooking = async (bookingNumber) => {\r\n    if(seachValue !== \"\") {\r\n      let param = `bookingNumber=${bookingNumber}&pgSize=10&pgNo=0&locale=en`;\r\n      await fetchData(param, true);\r\n    }\r\n    \r\n  }\r\n\r\n  const onSort = async (column) => {\r\n    let sortOrder;\r\n    if (column == 1) {\r\n      sortOrder = sortOrderDate == \"ASC\" ? \"DESC\" : \"ASC\";\r\n      setSortOrderDate(sortOrder);\r\n    } else {\r\n      sortOrder = sortOrderAmount == \"ASC\" ? \"DESC\" : \"ASC\";\r\n      setSortOrderAmount(sortOrder);\r\n    }\r\n\r\n    let param = `sortOrder=${sortOrder}&sortCol=${column}&pgSize=10&pgNo=0&locale=en`;\r\n    await fetchData(param, true);\r\n  }\r\n\r\n  const onDateSearch = async (fromDate, toDate) => {\r\n    if (fromDate && toDate) {\r\n      let param = `fromDate=${fromDate}&toDate=${toDate}&pgSize=10&pgNo=0&locale=en`;\r\n      await fetchData(param, true);\r\n    }\r\n\r\n  }\r\n\r\n  const topMenuItems = [\r\n    {\r\n      name: \"\",\r\n      src: \"filter\",\r\n      slot: \"\",\r\n      type: \"button\",\r\n      clickedOnTopMenu: () => {\r\n        setShowModal(true);\r\n      },\r\n    },\r\n    {\r\n      name: \"Booked Status\",\r\n      icon: chevronDownOutline,\r\n      slot: \"end\",\r\n      type: \"dropDown\",\r\n      list: [\r\n        { label: \"Pending Payment\", value: \"PPAY\" },\r\n        { label: \"Failed Payment\", value: \"FPAY\" },\r\n        { label: \"Transporter Pending\", value: \"SUCC\" },\r\n        { label: \"Transporter Confirmed\", value: \"TRANSCONF\" },\r\n        { label: \"MT IN Delivered\", value: \"FPAY\" }\r\n      ],\r\n      clickedOnTopMenu: (e) => {\r\n        console.log(\"clicked2\", e)\r\n        onStatusChange(e.value);\r\n      },\r\n    },\r\n    {\r\n      name: \"Booked on\",\r\n      slot: \"start\",\r\n      src: \"filter-down-arrow\",\r\n      rotate: sortOrderDate == \"ASC\" ? \"rotate(180deg)\" : \"\",\r\n      size: \"0.7rem\",\r\n      type: \"button\",\r\n      clickedOnTopMenu: () => onSort(1),\r\n    },\r\n    {\r\n      name: \"Amount\",\r\n      slot: \"start\",\r\n      src: \"filter-down-arrow\",\r\n      rotate: sortOrderAmount == \"ASC\" ? \"rotate(180deg)\" : \"\",\r\n      size: \"0.7rem\",\r\n      type: \"button\",\r\n      clickedOnTopMenu: () => onSort(5),\r\n    },\r\n  ];\r\n\r\n  function SearchBooking() {\r\n    return (\r\n      <div>\r\n        <IonToolbar className=\"border-bottom-booking\">\r\n          <IonInput\r\n            placeholder={\"Search with Booking Number\"}\r\n            type=\"search\"\r\n            value={seachValue}\r\n            className=\"input-box\"\r\n            onIonBlur={() => onSearchBooking(seachValue)}\r\n            onIonChange={(e) => setSearchValue(e.detail.value)}\r\n          ></IonInput>\r\n          {seachValue == \"\" ? (<IonButtons slot=\"end\" className=\"search-icon \">\r\n            <IonIcon slot=\"icon-only\" icon={search} />\r\n          </IonButtons>) : (\r\n            <IonButtons slot=\"end\" >\r\n              <IonLabel className=\"search-clear\" onClick={() => {\r\n                setSearchValue(\"\");\r\n                fetchData(\"\");\r\n              }}>Clear</IonLabel>\r\n            </IonButtons>)}\r\n        </IonToolbar>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <IonPage id=\"booking-page\">\r\n      <Header label={title} action=\"search\" customBack={true} backClick={goBack} showAgent={true} agentHeader={true}\r\n        searchClick={() => {\r\n          isSearchClick(!searchClick)\r\n        }} />\r\n      <IonContent\r\n        fullscreen padding-top\r\n        scrollEvents={true}\r\n        hidden={paymentPage !== \"\"}\r\n        className=\"page-content\"\r\n      >\r\n        <SlideUpModal\r\n          showModal={showModal}\r\n          openOrCloseModal={(status) => setShowModal(status)}\r\n          content={<SearchBoeByDate\r\n            openOrCloseModal={(modalStatus, fromDate, toDate) => {\r\n              setShowModal(modalStatus);\r\n              onDateSearch(fromDate, toDate);\r\n            }}\r\n            headerName=\"Booked On Date Filter\" />}\r\n        />\r\n        <IonRow className=\"horizontal-scroll\">\r\n          {searchClick ? (\r\n            <SearchBooking />\r\n          ) : (\r\n            <TopMenu topMenuProps={topMenuItems} />\r\n          )}\r\n        </IonRow>\r\n        <div className=\"decl-count\">\r\n          {\" \"}\r\n          Displaying {result.length} bookings\r\n        </div>\r\n        <IonGrid margin-top>\r\n          {result.map((item, id) => (\r\n            <BookingCard\r\n              status={requestStatus}\r\n              key={id}\r\n              town={item?.containersToTown}\r\n              yard={item?.containersInYard}\r\n              delivered={item?.containersDelivered}\r\n              completed={item?.containersCompleted}\r\n              bookingNumber={item?.bookingNumber}\r\n              amount={item?.amountPaid ?? \"0 AED\"}\r\n              bookedOn={item?.bookedOn}\r\n              noOfContainers={item?.noOfContainers}\r\n              // countTitle={title}\r\n              paymentStatus={item?.statusCode}\r\n              noOfTrucks={item.noOfTrucks}\r\n              clickCard={() => onCardClick(item)}\r\n              paymentClick={(e) => {\r\n                setPaymentPage(e);\r\n                setReferenceNumber(item?.bookingNumber);\r\n                console.log('paymentPage', e)\r\n              }}\r\n            />\r\n          ))}\r\n        </IonGrid>\r\n        <IonInfiniteScroll\r\n          threshold=\"100px\"\r\n          disabled={disableInfiniteScroll}\r\n          onIonInfinite={(e: CustomEvent<void>) => searchNext(e)}\r\n        >\r\n          <IonInfiniteScrollContent loadingText=\"Loading more...\"></IonInfiniteScrollContent>\r\n        </IonInfiniteScroll>\r\n      </IonContent>\r\n      {/* <IonContent  fullscreen hidden={paymentPage == \"\"}>\r\n          <div hidden={paymentPage !== \"success\"}>\r\n            <PaymentSuccess \r\n            referenceNumber={referenceNumber}\r\n            locationProps={props.history}/>\r\n          </div>\r\n          <div hidden={paymentPage !== \"fail\"}>\r\n            <PaymentFailed \r\n            referenceNumber={referenceNumber}\r\n            locationProps={props.history}/>\r\n          </div>\r\n          <div hidden={paymentPage !== \"pending\"}>\r\n            <PaymentPending\r\n              hidden={true}\r\n              referenceNumber={referenceNumber}\r\n              locationProps={props.history}\r\n            />\r\n          </div>\r\n          </IonContent> */}\r\n      <IonContent style={{ maxHeight: \"86px\" }}>\r\n        <MainTabs tab=\"status\" />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}