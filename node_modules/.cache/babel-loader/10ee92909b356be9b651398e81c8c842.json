{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\SVN-folder\\\\New-BRANCH-PUSH\\\\New folder\\\\src\\\\pages\\\\myBooking\\\\status\\\\Status.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { IonPage, IonContent, IonGrid } from \"@ionic/react\";\nimport StatusCard from \"./statusCard/StatusCard\";\nimport * as EndPointURL from \"../../../util/EndPointURL\";\nimport Header from \"../../../components/Header\";\nimport { httpGetCallWithoutHeader } from \"../../../services/EndPointApi\";\nimport Store from \"../../../redux/Store\";\nexport default function Status(props) {\n  var _countsRequest$result, _countsRequest$result2, _countsRequest$result3;\n\n  console.log(props);\n  var history = useHistory();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      countsRequest = _useState2[0],\n      setCountsRequest = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      agent = _useState4[0],\n      setAgent = _useState4[1];\n\n  Store.subscribe(function () {\n    setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\n    console.log(\"calling store\");\n  });\n  useEffect(function () {\n    getCountRequest();\n    console.log('call status', agent);\n  }, [agent]);\n\n  var onBookingClick = function onBookingClick() {\n    history.push(\"/bookingDetails/ALL\");\n  };\n\n  var onPODClick = function onPODClick() {\n    history.push(\"/bookingDetails/PODUPL\");\n  };\n\n  var onInvoiceClick = function onInvoiceClick() {\n    history.push(\"/bookingDetails/INVAPPR\");\n  };\n\n  var getCountRequest = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, respObj;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return httpGetCallWithoutHeader(EndPointURL.fetchRequestStatusCountsUrl);\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.success;\n\n            case 5:\n              if (!_context.sent) {\n                _context.next = 10;\n                break;\n              }\n\n              respObj = response.data.data.dataItems[0];\n              Object.keys(respObj).forEach(function (key) {\n                respObj[key] = respObj[key] < 10 ? \"0\" + respObj[key] : respObj[key];\n              });\n              _context.next = 10;\n              return setCountsRequest(_objectSpread(_objectSpread({}, countsRequest), {}, {\n                result: respObj\n              }));\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCountRequest() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onSearchClick = function onSearchClick() {\n    history.push(\"/search-booking\");\n  };\n\n  var goBack = function goBack() {\n    history.push(\"/tabs/landing\");\n  };\n\n  return /*#__PURE__*/React.createElement(IonPage, {\n    id: \"status-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    label: \"Status\",\n    action: \"search\",\n    searchClick: onSearchClick,\n    showAgent: true,\n    customBack: true,\n    backClick: goBack,\n    agentHeader: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(IonContent, {\n    fullscreen: true,\n    \"padding-top\": true,\n    className: \"page-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonGrid, {\n    \"margin-top\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(StatusCard, {\n    type: \"All Bookings\",\n    total: countsRequest === null || countsRequest === void 0 ? void 0 : (_countsRequest$result = countsRequest.result) === null || _countsRequest$result === void 0 ? void 0 : _countsRequest$result.ALL,\n    handleClick: onBookingClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(StatusCard, {\n    type: \"Verify POD's\",\n    total: (_countsRequest$result2 = countsRequest.result) === null || _countsRequest$result2 === void 0 ? void 0 : _countsRequest$result2.PODUPL,\n    handleClick: onPODClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(StatusCard, {\n    type: \"Verify Invoices\",\n    total: (_countsRequest$result3 = countsRequest.result) === null || _countsRequest$result3 === void 0 ? void 0 : _countsRequest$result3.INVAPPR,\n    handleClick: onInvoiceClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }))));\n}","map":{"version":3,"sources":["D:/SVN-folder/New-BRANCH-PUSH/New folder/src/pages/myBooking/status/Status.tsx"],"names":["React","useState","useEffect","useHistory","IonPage","IonContent","IonGrid","StatusCard","EndPointURL","Header","httpGetCallWithoutHeader","Store","Status","props","console","log","history","countsRequest","setCountsRequest","agent","setAgent","subscribe","getState","CheckUserStatus","user","selectedAgent","getCountRequest","onBookingClick","push","onPODClick","onInvoiceClick","fetchRequestStatusCountsUrl","response","success","respObj","data","dataItems","Object","keys","forEach","key","result","onSearchClick","goBack","ALL","PODUPL","INVAPPR"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,OAA9B,QAA6C,cAA7C;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,2BAA7B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,wBAAT,QAAyC,+BAAzC;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AAEA,eAAe,SAASC,MAAT,CAAgBC,KAAhB,EAAuB;AAAA;;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,MAAIG,OAAO,GAAGb,UAAU,EAAxB;;AACA,kBAA0CF,QAAQ,CAAM,EAAN,CAAlD;AAAA;AAAA,MAAOgB,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,mBAA0BjB,QAAQ,EAAlC;AAAA;AAAA,MAAOkB,KAAP;AAAA,MAAcC,QAAd;;AACAT,EAAAA,KAAK,CAACU,SAAN,CAAgB,YAAM;AACpBD,IAAAA,QAAQ,CAACT,KAAK,CAACW,QAAN,GAAiBC,eAAjB,CAAiCC,IAAjC,CAAsCC,aAAvC,CAAR;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD,GAHD;AAKAb,EAAAA,SAAS,CAAC,YAAM;AACdwB,IAAAA,eAAe;AACfZ,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA4BI,KAA5B;AACD,GAHQ,EAGN,CAACA,KAAD,CAHM,CAAT;;AAKA,MAAMQ,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BX,IAAAA,OAAO,CAACY,IAAR,CAAa,qBAAb;AACD,GAFD;;AAGA,MAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBb,IAAAA,OAAO,CAACY,IAAR,CAAa,wBAAb;AACD,GAFD;;AAGA,MAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3Bd,IAAAA,OAAO,CAACY,IAAR,CAAa,yBAAb;AACD,GAFD;;AAKA,MAAMF,eAAe;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACDhB,wBAAwB,CAACF,WAAW,CAACuB,2BAAb,CADvB;;AAAA;AAClBC,cAAAA,QADkB;AAAA;AAAA,qBAEZA,QAAQ,CAACC,OAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGhBC,cAAAA,OAHgB,GAGNF,QAAQ,CAACG,IAAT,CAAcA,IAAd,CAAmBC,SAAnB,CAA6B,CAA7B,CAHM;AAIlBC,cAAAA,MAAM,CAACC,IAAP,CAAYJ,OAAZ,EAAqBK,OAArB,CAA6B,UAAUC,GAAV,EAAe;AAC1CN,gBAAAA,OAAO,CAACM,GAAD,CAAP,GAAeN,OAAO,CAACM,GAAD,CAAP,GAAe,EAAf,GAAoB,MAAMN,OAAO,CAACM,GAAD,CAAjC,GAAyCN,OAAO,CAACM,GAAD,CAA/D;AACD,eAFD;AAJkB;AAAA,qBAQZtB,gBAAgB,iCACjBD,aADiB;AAEpBwB,gBAAAA,MAAM,EAAEP;AAFY,iBARJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAfR,eAAe;AAAA;AAAA;AAAA,KAArB;;AAeA,MAAMgB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B1B,IAAAA,OAAO,CAACY,IAAR,CAAa,iBAAb;AACD,GAFD;;AAIA,MAAMe,MAAM,GAAG,SAATA,MAAS,GAAM;AACnB3B,IAAAA,OAAO,CAACY,IAAR,CAAa,eAAb;AACD,GAFD;;AAIA,sBACI,oBAAC,OAAD;AAAS,IAAA,EAAE,EAAC,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAC,QADR;AAEE,IAAA,MAAM,EAAC,QAFT;AAGE,IAAA,WAAW,EAAEc,aAHf;AAIE,IAAA,SAAS,EAAE,IAJb;AAKE,IAAA,UAAU,EAAE,IALd;AAME,IAAA,SAAS,EAAEC,MANb;AAOE,IAAA,WAAW,EAAE,IAPf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAUE,oBAAC,UAAD;AAAY,IAAA,UAAU,MAAtB;AAAuB,uBAAvB;AAAmC,IAAA,SAAS,EAAC,cAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,sBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AACE,IAAA,IAAI,EAAC,cADP;AAEE,IAAA,KAAK,EAAG1B,aAAH,aAAGA,aAAH,gDAAGA,aAAa,CAAEwB,MAAlB,0DAAG,sBAAuBG,GAFjC;AAGE,IAAA,WAAW,EAAEjB,cAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME,oBAAC,UAAD;AACE,IAAA,IAAI,EAAC,cADP;AAEE,IAAA,KAAK,4BAAEV,aAAa,CAACwB,MAAhB,2DAAE,uBAAsBI,MAF/B;AAGE,IAAA,WAAW,EAAEhB,UAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAWE,oBAAC,UAAD;AACE,IAAA,IAAI,EAAC,iBADP;AAEE,IAAA,KAAK,4BAAEZ,aAAa,CAACwB,MAAhB,2DAAE,uBAAsBK,OAF/B;AAGE,IAAA,WAAW,EAAEhB,cAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF,CAVF,CADJ;AAgCD","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { IonPage, IonContent, IonGrid } from \"@ionic/react\";\r\nimport StatusCard from \"./statusCard/StatusCard\";\r\nimport * as EndPointURL from \"../../../util/EndPointURL\";\r\nimport Header from \"../../../components/Header\";\r\nimport { httpGetCallWithoutHeader } from \"../../../services/EndPointApi\";\r\nimport Store from \"../../../redux/Store\";\r\n\r\nexport default function Status(props) {\r\n  console.log(props);\r\n  let history = useHistory();\r\n  const [countsRequest, setCountsRequest] = useState<any>({}); \r\n  const [agent, setAgent] = useState(); \r\n  Store.subscribe(() => {\r\n    setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\r\n    console.log(\"calling store\");\r\n  });\r\n\r\n  useEffect(() => {\r\n    getCountRequest();\r\n    console.log('call status' , agent);\r\n  }, [agent]);\r\n\r\n  const onBookingClick = () => {\r\n    history.push(\"/bookingDetails/ALL\");\r\n  };\r\n  const onPODClick = () => {\r\n    history.push(\"/bookingDetails/PODUPL\");\r\n  };\r\n  const onInvoiceClick = () => {\r\n    history.push(\"/bookingDetails/INVAPPR\");\r\n  };\r\n\r\n\r\n  const getCountRequest = async () => {\r\n    var response = await httpGetCallWithoutHeader(EndPointURL.fetchRequestStatusCountsUrl);\r\n    if (await response.success) {\r\n      var respObj = response.data.data.dataItems[0];\r\n        Object.keys(respObj).forEach(function (key) {\r\n          respObj[key] = respObj[key] < 10 ? \"0\" + respObj[key] : respObj[key];\r\n        });\r\n  \r\n        await setCountsRequest({\r\n          ...countsRequest,\r\n          result: respObj,\r\n        });\r\n    }\r\n  };\r\n\r\n  const onSearchClick = () => {\r\n    history.push(\"/search-booking\");\r\n  };\r\n\r\n  const goBack = () => {\r\n    history.push(\"/tabs/landing\");\r\n  }\r\n\r\n  return (\r\n      <IonPage id=\"status-page\">\r\n        <Header\r\n          label=\"Status\"\r\n          action=\"search\"\r\n          searchClick={onSearchClick}\r\n          showAgent={true}\r\n          customBack={true} \r\n          backClick={goBack}\r\n          agentHeader={true}\r\n        />\r\n        <IonContent fullscreen padding-top className=\"page-content\">\r\n          <IonGrid margin-top>\r\n            <StatusCard\r\n              type=\"All Bookings\"\r\n              total= {countsRequest?.result?.ALL}\r\n              handleClick={onBookingClick}\r\n            />\r\n            <StatusCard\r\n              type=\"Verify POD's\"\r\n              total={countsRequest.result?.PODUPL}\r\n              handleClick={onPODClick}\r\n            />\r\n            <StatusCard\r\n              type=\"Verify Invoices\"\r\n              total={countsRequest.result?.INVAPPR}\r\n              handleClick={onInvoiceClick}\r\n            />\r\n          </IonGrid>\r\n        </IonContent>\r\n      </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}